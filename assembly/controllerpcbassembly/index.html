<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Controller PCB - Kinetic Display</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Kinetic Display</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Contents</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Introduction</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../intro/" class="dropdown-item">Kinetic Display</a>
</li>
                                    
<li>
    <a href="../../prerequisitesoftware/" class="dropdown-item">Software and Microcontroller Preparation</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Parts</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../createandorder/bom/" class="dropdown-item">Bill of Materials</a>
</li>
                                    
<li>
    <a href="../../createandorder/pcb/" class="dropdown-item">Order PCBs</a>
</li>
                                    
<li>
    <a href="../../createandorder/3dprints/" class="dropdown-item">Print Parts</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Assemble</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../actuatorassembly/" class="dropdown-item">Actuators</a>
</li>
                                    
<li>
    <a href="../digitpcbassembly/" class="dropdown-item">Digit PCBs</a>
</li>
                                    
<li>
    <a href="../deploydigitproject/" class="dropdown-item">Deploy Digit Project</a>
</li>
                                    
<li>
    <a href="../digitpcbtest/" class="dropdown-item">Test Digit PCBs</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Controller PCB</a>
</li>
                                    
<li>
    <a href="../deploycontrollerproject/" class="dropdown-item">Deploy Controller Project</a>
</li>
                                    
<li>
    <a href="../controllerpcbtest/" class="dropdown-item">Test Controller PCB</a>
</li>
                                    
<li>
    <a href="../powermanagementpcb/" class="dropdown-item">Power Management PCB</a>
</li>
                                    
<li>
    <a href="../powermanagementpcbtest/" class="dropdown-item">Test Power Management PCB</a>
</li>
                                    
<li>
    <a href="../buckmodulesandwiring/" class="dropdown-item">Buck Modules and Wiring</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../digitpcbtest/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../deploycontrollerproject/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#controller_and_digit_1_pcb_assembly" class="nav-link">Controller and Digit 1 PCB Assembly</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#prerequisites" class="nav-link">Prerequisites</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#assemble_digit_one" class="nav-link">Assemble Digit One</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#colon_segments_leds" class="nav-link">Colon Segments LEDs</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#pnp_and_npn_transistors" class="nav-link">PNP and NPN transistors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#headers_for_the_pico_and_picow" class="nav-link">Headers for the Pico and PicoW</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#surface_mount_resistors" class="nav-link">Surface mount resistors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#install_six_two_pin_2p_terminal_block_connectors" class="nav-link">Install Six, two pin (2P) Terminal Block Connectors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#electrolytic_and_ceramic_capacitors" class="nav-link">Electrolytic and Ceramic Capacitors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#mount_the_motor_drivers" class="nav-link">Mount the Motor Drivers</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#vertical_slide_spdt_switch" class="nav-link">Vertical Slide SPDT Switch</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#light_dependent_resistor_ldr" class="nav-link">Light Dependent Resistor (LDR)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#controller_and_digit_1_schematic" class="nav-link">Controller and Digit 1 Schematic</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="controller_and_digit_1_pcb_assembly">Controller and Digit 1 PCB Assembly<a class="headerlink" href="#controller_and_digit_1_pcb_assembly" title="Permanent link">&para;</a></h1>
<p>Digit 1 and the colons are on a single PCB. Digit 1, powered by a Raspberry Pi Pico 2040 is identical to digits 0, 2, and 3 except it is contained on a single PCB with the controller. The Raspberry Pi Pico W 2040 operates the colons and serves as the central command and control for the display performing the following functions:</p>
<ul>
<li>Sends commands to digits as to what to display (i.e. 0-9, A-F)</li>
<li>Sends commands for the brightness of the digits</li>
<li>When in Admin mode, it will transmit its own wifi service to wirelessly change the display settings from a cell phone or computer.</li>
<li>Manages the scheduler, which is the mechanism for displaying time, date, external temperature and humidity, and interior temperature and humidity.</li>
<li>When connected to a wifi network, it will obtain its public facing IP address, look up the time zone it is located in, and set the display to the local time</li>
<li>When connected to a wifi network, it will obtain the closest weather station and, depending on the scheduler, may display the external temperature and humidity.</li>
<li>Manages the low power consumption mode by turning off the power to digits 0-3.  When awakened, it will turn on the power to digits 0-3.</li>
</ul>
<p>Front face of the controller PCB fully assembled.
<img alt="front-face-controller-pcb" src="../../img/controllerpcb/fullyassembled-frontface.webp" />
Back side of the controller PCB fully assembled.
<img alt="back-face-controller-pcb" src="../../img/controllerpcb/fullyassembled-backface.webp" /></p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../../createandorder/pcb/">Fabrication of the controller and digit one PCB</a></li>
<li>3D print of the upper and lower colons</li>
</ul>
<p><strong><em>Table of components</em></strong></p>
<table>
<thead>
<tr>
<th style="text-align: center;">Quantity</th>
<th style="text-align: left;">Component</th>
<th style="text-align: center;">Image</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">5</td>
<td style="text-align: left;">16 pin IC socket</td>
<td style="text-align: center;"><img alt="component-1" src="../../img/component/component-1.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td style="text-align: left;">L293D stepper motor driver</td>
<td style="text-align: center;"><img alt="component-2" src="../../img/component/component-2.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: left;">20 pin female header connector</td>
<td style="text-align: center;"><img alt="component-3" src="../../img/component/component-3.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: left;">20 pin single row breakaway male connector</td>
<td style="text-align: center;"><img alt="component-4" src="../../img/component/component-4.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: left;">Vertical Slide Switch Micro High Knob 3 Pin 2 Position 1P2T SPDT Panel Mount</td>
<td style="text-align: center;"><img alt="component-4" src="../../img/component/component-18.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">6</td>
<td style="text-align: left;">2 Pin PCB Mount Screw Terminal Block Connector Straight Pin</td>
<td style="text-align: center;"><img alt="component-5" src="../../img/component/component-5.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: left;">0.1μ farad ceramic capacitor</td>
<td style="text-align: center;"><img alt="component-6" src="../../img/component/component-6.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: left;">1μ farad electrolytic capacitor</td>
<td style="text-align: center;"><img alt="component-7" src="../../img/component/component-7.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: left;">5mm 0.5 Ω ohm Photoresistor Resistor 5516 GL5516</td>
<td style="text-align: center;"><img alt="component-19" src="../../img/component/component-19.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: left;">S8550 TO-92 TH PNP Transistor</td>
<td style="text-align: center;"><img alt="component-20" src="../../img/component/component-20.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: left;">2N2222 TO-92 TH NPN Transistor</td>
<td style="text-align: center;"><img alt="component-21" src="../../img/component/component-21.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: left;">10K ohm 0805 Resistor 1/2w Metal Film Fixed Resistor</td>
<td style="text-align: center;"><img alt="component-22" src="../../img/component/component-22.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">28</td>
<td style="text-align: left;">5mm Flat top LED, anode long lead (your choice of color)</td>
<td style="text-align: center;"><img alt="component-8" src="../../img/component/component-8.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: left;">3mm Flat top LED, anode long lead (your choice of color)</td>
<td style="text-align: center;"><img alt="component-17" src="../../img/component/component-17.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: left;">Raspberry Pi Pico 2040 with Headers</td>
<td style="text-align: center;"><img alt="component-9" src="../../img/component/component-9.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: left;">Raspberry Pi Pico W 2040 with Headers</td>
<td style="text-align: center;"><img alt="component-9" src="../../img/component/component-16.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: left;">Controller PCB</td>
<td style="text-align: center;">See next section</td>
</tr>
</tbody>
</table>
<p><strong><em>Table of tools</em></strong></p>
<table>
<thead>
<tr>
<th style="text-align: center;">Required</th>
<th style="text-align: left;">Tool</th>
<th style="text-align: center;">Image</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Yes</td>
<td style="text-align: left;">Soldering station</td>
<td style="text-align: center;"><img alt="tool-4" src="../../img/tools/tool-4.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">Yes</td>
<td style="text-align: left;">0.8mm 1.76oz RoHS flux core solder</td>
<td style="text-align: center;"><img alt="tool-1" src="../../img/tools/tool-1.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">Yes</td>
<td style="text-align: left;">Mini flush cutters</td>
<td style="text-align: center;"><img alt="tool-6" src="../../img/tools/tool-6.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">Yes</td>
<td style="text-align: left;">Isopropyl Alcohol</td>
<td style="text-align: center;"><img alt="tool-3" src="../../img/tools/tool-3.webp" /></td>
</tr>
<tr>
<td style="text-align: center;">Yes</td>
<td style="text-align: left;">Cotton Facial Pads</td>
<td style="text-align: center;"><img alt="tool-2" src="../../img/tools/tool-2.webp" /></td>
</tr>
</tbody>
</table>
<h2 id="assemble_digit_one">Assemble Digit One<a class="headerlink" href="#assemble_digit_one" title="Permanent link">&para;</a></h2>
<p>This section will guide you through following the relevant instructions from the <strong>Digit 0, 2, &amp; 3</strong> PCB assembly to assemble <strong>Digit 1</strong> on the controller PCB.</p>
<ol>
<li>On the front face of the controller PCB, <a href="../digitpcbassembly/#add_the_16_pin_headers">add the 16 pin headers</a> as previously completed for the digit PCBs. Note the highlighted sections in the picture below that you'll add an additional, 16 pin header to the controller PCB. Don't forget to snip all the pins flush on the back side of the controller PCB, resolder each snipped pin to a smooth bead, then remove the flux with cotton dabbed with isopropyl alcohol.
<img alt="1-controllerpcb" src="../../img/controllerpcb/1-controllerpcb.webp" /></li>
<li>On the front face of the controller PCB, <a href="../digitpcbassembly/#add_the_28_leds">add the 28 5mm LEDs</a> as previously completed for the digit PCBs. Be sure to insert the LED anode (long pin) into the through hole marked with a <code>+</code>. Do not solder the 5mm LED into the <code>Top-LED1</code> or <code>LWR-LED1</code> location on the controller PCB. Instructions later in this tutorial will detail how to install the 3mm LEDs into the <code>Top-LED1</code> and <code>LWR-LED1</code> locations. Finish soldering the 28 5mm LEDs by snipping all the pins flush on the back side of the controller PCB, resolder each snipped pin into a smooth bead, then remove the flux with cotton dabbed with isopropyl alcohol.
<img alt="2-controllerpcb" src="../../img/controllerpcb/2-controllerpcb.webp" /></li>
<li>On the back face of the controller PCB, <a href="../digitpcbassembly/#add_the_motor_pins">add the motor pins</a>. Note the highlighted sections in the picture below that there are two additional motor pins (pairs) you'll need to add for the colons, and an additional 3-pin connector for the Digital Humidity and Temperature (DHT) sensor. Don't forget to snip all the pins flush on the back side of the controller PCB, resolder each snipped pin to a smooth bead, then remove the flux with cotton dabbed with isopropyl alcohol.
<img alt="3-controllerpcb" src="../../img/controllerpcb/3-controllerpcb.webp" /></li>
</ol>
<h2 id="colon_segments_leds">Colon Segments LEDs<a class="headerlink" href="#colon_segments_leds" title="Permanent link">&para;</a></h2>
<p>In addition to the soldering equipment you needed when previously mounting the 5mm flat top LEDs, you'll need the two 3D printed colon segments, labeled <strong>(A)</strong> in the picture below, as fabricated in the <a href="../../createandorder/3dprints/">3D print the display parts</a> document.</p>
<p><img alt="6-controllerpcb" src="../../img/controllerpcb/6-controllerpcb.webp" /></p>
<ol>
<li>Following label <strong>(B)</strong> in the picture above, insert the <strong>3mm</strong> flat top LEDs into <code>Top-LED1</code> and <code>LWR-LED1</code> on the front face of the controller PCB. Follow the same 5mm LED install process and be sure to insert the long lead anode of the LED into the <code>+</code> through hole.</li>
<li>Following the picture below, slide the colon segments over the 3mm LED. Note the lower base of the LED lense may need to be lightly sanded with 300 grid sandpaper if it does not easily slide into the colon segment.
<img alt="7-controllerpcb" src="../../img/controllerpcb/7-controllerpcb.webp" /></li>
<li>On the back side of the controller PCB, align the colon segment so its square base is positioned into the square hole of the PCB.
<img alt="8-controllerpcb" src="../../img/controllerpcb/8-controllerpcb.webp" /></li>
<li>Solder the 3mm LEDs into place.
<img alt="9-controllerpcb" src="../../img/controllerpcb/9-controllerpcb.webp" /></li>
<li>Optionally you can use a metric ruler to verify the LEDs protrude perpendicular from the PCB and are 14mm from the PCB to the top of the lens of the LED. This optional step insures the proper length of the 3mm LEDs.
<img alt="10-controllerpcb" src="../../img/controllerpcb/10-controllerpcb.webp" /></li>
</ol>
<h2 id="pnp_and_npn_transistors">PNP and NPN transistors<a class="headerlink" href="#pnp_and_npn_transistors" title="Permanent link">&para;</a></h2>
<ol>
<li>Following the picture below, solder the <strong>s8550D PNP transistor</strong> into the through hole (mis-) labelled <code>Q3 2N8550</code> on the front face of the controller PCB. When inserting the transistor's pins into the through holes, be sure to orient the transistors so the flat face matches the silk screen on the PCB as held by the tweezers in the picture.
<img alt="4-controllerpcb" src="../../img/controllerpcb/4-controllerpcb.webp" /></li>
<li>Following the picture below, solder the <strong>2N2222A PNP transistor</strong> into the though hole labelled <code>Q2 2N2222</code> on the front face of the controller PCB.
<img alt="5-controllerpcb" src="../../img/controllerpcb/5-controllerpcb.webp" /></li>
</ol>
<h2 id="headers_for_the_pico_and_picow">Headers for the Pico and PicoW<a class="headerlink" href="#headers_for_the_pico_and_picow" title="Permanent link">&para;</a></h2>
<p>On the back side of the PCB, place the four 20 pin headers into the through holes for <code>RASP1</code> and <code>RASP2</code>. Carefully turn over the PCB while keeping the 20 pin headers in the through holes. Level the PCB and adjust the two 20 pin headers so they are perpendicular to the PCB. To keep the headers perpendicular to the PCB, you can provide a temporary solder onto a pin or use a jig. Solder the pins once in place. Snip all the pins flush, resolder each to a smooth bead, then remove the flux with cotton dabbed with isopropyl alcohol.
<img alt="11-controllerpcb" src="../../img/controllerpcb/11-controllerpcb.webp" /></p>
<h2 id="surface_mount_resistors">Surface mount resistors<a class="headerlink" href="#surface_mount_resistors" title="Permanent link">&para;</a></h2>
<p>On the back side of the PCB, solder the two 10kΩ resistors onto the pads marked <code>R2 10k</code> and <code>R3 10k</code> located between the top and bottom rows of the 20-pin headers. Soldering surface mount components require a slightly different skill than through hole soldering as you'll need to use tweezers to center the resistor over the pads and apply a minimal amount of solder. There are several online tutorials on how to solder surface mount compontents using a soldering iron and tweezers.
<img alt="12-controllerpcb" src="../../img/controllerpcb/12-controllerpcb.webp" /></p>
<h2 id="install_six_two_pin_2p_terminal_block_connectors">Install Six, two pin (2P) Terminal Block Connectors<a class="headerlink" href="#install_six_two_pin_2p_terminal_block_connectors" title="Permanent link">&para;</a></h2>
<p>There are five 2P terminal block connectors on the front face of the PCB, and one on the back side.
The picture below shows a completed install of the terminal block connectors on the front face of the controller PCB. Note the arrows pointing in the direction of the terminal block connector where the wires are inserted into the ports. To follow the steps below, you'll position the front face of the controller PCB up, then work your way from the bottom left corner <strong>(1)</strong>, to the bottom right corner <strong>(5)</strong>.
<img alt="13-controllerpcb" src="../../img/controllerpcb/13-controllerpcb.webp" /></p>
<ol>
<li>Follow the picture below and insert the 2P terminal block connector into the <code>5v-D1</code> through holes with the connector facing LEFT, then solder it into place.
<img alt="14-controllerpcb" src="../../img/controllerpcb/14-controllerpcb.webp" /></li>
<li>Follow the picture below and insert the 2P terminal block connector into the <code>U7, Tx-1 Rx-1</code> through holes with the connector facing LEFT, then solder it into place.
<img alt="15-controllerpcb" src="../../img/controllerpcb/15-controllerpcb.webp" /></li>
<li>Follow the picture below and insert the 2P terminal block connector into the <code>U7, GPIO19 Tx-0</code>through holes with the connector facing LEFT, then solder it into place.
<img alt="16-controllerpcb" src="../../img/controllerpcb/16-controllerpcb.webp" /></li>
<li>Follow the picture below and insert the 2P terminal block connector into the <code>UART1, Tx-0 Rx-0</code> through holes with the connector facing RIGHT, then solder it into place.
<img alt="17-controllerpcb" src="../../img/controllerpcb/17-controllerpcb.webp" /></li>
<li>Follow the picture below, insert the 2P terminal block connector into the <code>5v-D0</code> through holes with the connector facing LEFT, then solder it into place.
<img alt="18-controllerpcb" src="../../img/controllerpcb/18-controllerpcb.webp" /></li>
<li>Position the back face of the PCB up and insert the 2P terminal block connector into the <code>5v-OUT</code> through holes with the connector facing RIGHT, then solder it into place.
<img alt="19-controllerpcb" src="../../img/controllerpcb/19-controllerpcb.webp" /></li>
</ol>
<h2 id="electrolytic_and_ceramic_capacitors">Electrolytic and Ceramic Capacitors<a class="headerlink" href="#electrolytic_and_ceramic_capacitors" title="Permanent link">&para;</a></h2>
<ol>
<li>On the front of the controller PCB, align the electrolytic capacitor <code>-</code> sign opposite the <code>+</code> printed on the PCB for capacitor <code>c01</code> and <code>c1</code>, see the picture below. Insert the pins into the through holes, then turn the controller PCB over to the back side and solder the capacitors.
<img alt="20-controllerpcb" src="../../img/controllerpcb/20-controllerpcb.webp" /></li>
<li>On the front of the controller PCB, insert the ceramic capacitor pins into the through holes titled <code>c02</code> and <code>c2</code>. Ceramic capacitors are non-polarized and can be inserted in either direction. Turn the controller PCB over to the back and solder the capacitors.
<img alt="21-controllerpcb" src="../../img/controllerpcb/21-controllerpcb.webp" /></li>
</ol>
<h2 id="mount_the_motor_drivers">Mount the Motor Drivers<a class="headerlink" href="#mount_the_motor_drivers" title="Permanent link">&para;</a></h2>
<p>On the front face of the controller PCB, <a href="../digitpcbassembly/#mount_the_motor_drivers">mount the L293D 16-pin IC Stepper Motor Drivers</a> as previously completed for the digit PCBs.
<img alt="5-controllerpcb-motordriverIC" src="../../img/digitpcbassembly/1-digitpcbassembly-motordriver.webp" /></p>
<h2 id="vertical_slide_spdt_switch">Vertical Slide SPDT Switch<a class="headerlink" href="#vertical_slide_spdt_switch" title="Permanent link">&para;</a></h2>
<p>On the back face of the controller PCB, insert the SPDT vertical slide switch pins into the <code>ON/OFF</code> through holes found on the top right hand corner, then solder into place.
<img alt="22-controllerpcb" src="../../img/controllerpcb/22-controllerpcb.webp" /></p>
<h2 id="light_dependent_resistor_ldr">Light Dependent Resistor (LDR)<a class="headerlink" href="#light_dependent_resistor_ldr" title="Permanent link">&para;</a></h2>
<p>Following the picture below and from the back face of the controller PCB, place the two LDR pins into the <code>R1</code> through holes. Bend the pins of the LDR upward so the head of the LDR fits tightly on the top of controller PCB. Solder the LDR in place once properly positioned.</p>
<p><img alt="23-controllerpcb" src="../../img/controllerpcb/23-controllerpcb.webp" /></p>
<p>Congratulations, you've completed assembling the controller and digit 1 PCB!</p>
<h2 id="controller_and_digit_1_schematic">Controller and Digit 1 Schematic<a class="headerlink" href="#controller_and_digit_1_schematic" title="Permanent link">&para;</a></h2>
<p>The schematic in this section (below) represents the <strong>Colons &amp; Display Microcontroller</strong> portion of the circuit for the controller and digit 1 PCB. This circuit is designed to control the colons of the display, acting as the central hub for communication, power management, and environmental data (interior and outdoor) integration. The Raspberry Pi Pico W 2040 orchestrates all operations, while the supporting components ensure stable and efficient functionality. Below is an explanation of the various components, their purpose, and how the circuitry functions:</p>
<h3 id="key_components_and_their_purpose"><em>Key Components and Their Purpose</em><a class="headerlink" href="#key_components_and_their_purpose" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Raspberry Pi Pico W 2040 (Microcontroller)</strong>:</br>
    <em>Purpose</em>: Acts as the central processing unit for the display. It controls the colons and communicates with the digits.</br>
    <em>Functions</em>:<ul>
<li>Sends commands to the digits (e.g., what to display, brightness levels).</li>
<li>Manages `Wi-Fi connectivity for remote control and time synchronization.</li>
<li>Handles scheduling for displaying time, date, and environmental data.</li>
<li>Controls power-saving modes by turning off unused digits.</li>
</ul>
</li>
<li><strong>4-Pin UART and Low Power mode pin connector (U7)</strong>:</br>
    <em>Purpose</em>: Provides communication between the microcontroller and the digits via UART (Universal Asynchronous Receiver-Transmitter).</br>
    <em>Pins</em>:<ul>
<li><code>Tx-0</code>, <code>Rx-0</code>, <code>Tx-1</code>, <code>Rx-1</code>: Used for transmitting and receiving data to/from the digits.</li>
<li><code>GPIO19</code>: is used to turn on and off the power to the digits.</li>
</ul>
</li>
<li><strong>L293D Motor Driver IC (U5)</strong>:</br>
    <em>Purpose</em>: Drives the colon motors (top and lower colons) to control their movement.</br>
    <em>Functionality</em>: Allows the microcontroller to control the colon motors for precise positioning.</br>
    <em>Pins</em>:<ul>
<li><code>ENABLE1</code> and <code>ENABLE2</code>: Controls the motor speed.</li>
<li><code>INPUT1</code>, <code>INPUT2</code>, <code>INPUT3</code>, <code>INPUT4</code>: Control the CW and CCW direction of the motors.</li>
<li><code>OUTPUT1</code>, <code>OUTPUT2</code>, <code>OUTPUT3</code>, <code>OUTPUT4</code>: Provide the output signals to the motors.</li>
</ul>
</li>
<li><strong>2-Pin Terminal Block Connectors</strong>:</br>
    <em>Purpose</em>: Provide connections for external components like power, UART communication, and sensors.</br>
    <em>Examples</em>:<ul>
<li><code>5V-D1</code>, <code>5V-D0</code>: Power connections for the digits.</li>
<li><code>UART1</code>, <code>Tx-0</code>, <code>Rx-0</code>: UART communication lines.</li>
<li><code>5V-OUT</code>: Power output for external components.</li>
</ul>
</li>
<li><strong>PNP and NPN Transistors (S8550 and 2N2222)</strong>:</br>
    <em>Purpose</em>: Act as a switch for powering the DHT22 sensor.</br>
    <em>S8550 (PNP)</em>: Used for switching power on or off to the DHT22 sensor</br>
    <em>2N2222 (NPN)</em>: Used to drive the base of the S8550 to manage power to the DHT22 sensor.</li>
<li><strong>Light Dependent Resistor (LDR)</strong>:</br>
    <em>Purpose</em>: Measures ambient light levels to adjust the brightness of the display dynamically.</br>
    <em>Placement</em>: Connected to <code>R1</code> and works with the microcontroller to sense light intensity.</li>
<li><strong>Electrolytic and Ceramic Capacitors (C01, C1, C02, C2)</strong>:</br>
    <em>Purpose</em>: Provide power filtering and decoupling to ensure stable operation of the microcontroller.</br>
    <em>Electrolytic Capacitors</em>:</br><ul>
<li>Polarized, used for smoothing power supply fluctuations.
<em>Ceramic Capacitors</em>:</br></li>
<li>Non-polarized, used for high-frequency noise filtering.</li>
</ul>
</li>
<li><strong>Vertical Slide SPDT Switch (SW1)</strong>:</br>
    <em>Purpose</em>: Acts as an on/off switch for the entire circuit where off may be <strong>Low Power</strong> or <strong>Admin</strong> mode. When the switch is on and the 12v power supply is plugged in, the display will run using its saved settings which includes the SSID and password to the wifi network. When the switch is turned off, the disconnected 12v power supply is then connected and plugged into wall power, the Pico W provides its own wifi and web service allowing you to direcctly connect to its web page and remotely change the display settings. When the switch is changed to the off position while the display is actively running, then the display will retract all the segments and enter low power mode.</br>
    <em>Placement</em>: Controls its internal wifi service and the flow of power to the display.</li>
<li><strong>Resistors (R2, R3)</strong>:</br>
    <em>Purpose</em>: Limit current and set voltage levels in the circuit.</br>
    <em>R2 and R3 (10kΩ)</em>: Pull-up or pull-down resistors for stabilizing signals.</li>
<li><strong>LEDs (TOP-LED1, LWR-LED1)</strong>:</br>
    <em>Purpose</em>: Indicate the status of the colons.</br>
    <em>Placement</em>: Positioned on the PCB to align with the colon segments.</li>
<li><strong>DHT22 Sensor Connector</strong>:</br>
    <em>Purpose</em>: Provides a connection for the Digital Humidity and Temperature (DHT) sensor.</br>
    <em>Functionality</em>: Allows the microcontroller to read environmental data for display.</li>
</ol>
<h3 id="how_the_circuitry_works"><em>How the Circuitry Works</em><a class="headerlink" href="#how_the_circuitry_works" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Power Supply</strong>:</br><ul>
<li>Power is supplied by buck converters through the <code>5V-OUT</code> and <code>5V-D1/D0</code> terminal blocks.</li>
<li>Capacitors (C01, C1, C02, C2) stabilize the power supply and filter noise for the microcontrollers.</li>
</ul>
</li>
<li><strong>Microcontroller Control</strong>:<ul>
<li>The Raspberry Pi Pico W 2040 serves as the brain of the circuit, controlling all components.</li>
<li>It communicates with the digits via UART (U7) and controls the colon motors through the L293D motor driver (U5).</li>
</ul>
</li>
<li><strong>Colon Motor Control</strong>:<ul>
<li>The L293D motor driver receives control signals from the microcontroller to drive the colon motors.</li>
<li>The <code>ENABLE</code> and <code>INPUT</code> pins determine the speed and direction of the motors.</li>
</ul>
</li>
<li><strong>Display Brightness Adjustment</strong>:<ul>
<li>The LDR (R1) measures ambient light levels and sends the data to the microcontroller.</li>
<li>The microcontroller adjusts the brightness of the LEDs accordingly.</li>
</ul>
</li>
<li><strong>Wi-Fi and Scheduler</strong>:<ul>
<li>The Raspberry Pi Pico W 2040 connects to a Wi-Fi network to synchronize time and fetch weather data.</li>
<li>The scheduler manages the display of time, date, and environmental data.</li>
</ul>
</li>
<li><strong>Low Power Mode</strong>:<ul>
<li>The microcontroller uses the S8550 and 2N2222 transistors to switch off power to the DHT22 when not in use.</li>
</ul>
</li>
<li><strong>User Interaction</strong>:<ul>
<li>The SPDT switch (SW1) allows the user to turn the circuit on or off (low power or Admin mode).</li>
<li>The LEDs provide visual feedback for the status of the colons.</li>
</ul>
</li>
</ol>
<p><img alt="controllerschematic-1" src="../../img/controllerpcb/digit1-colons-display-controller.png" /></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
